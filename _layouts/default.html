<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16" />


    <title>{{ site.title }}</title>
    <meta name="description" content="{{ site.description }}">

    <script src="https://kit.fontawesome.com/17357694a0.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <style type="text/css">

    #navigation {
        position: fixed;
        right: 0;
        text-align: center;
        z-index: 1;
    }

    .call-button {
      position: absolute;
      top: 5px;
      left: 5px;
    }

    #intro {
        background: #404040 url('/images/back1.jpg') 50% 0 repeat;
        height: 352px;
    }
    .logo {
       margin-top: 310px;
    }
    @media (min-width: 992px) {
      .logo {
         margin-top: 302px;
      }
    }
    #products {
        background: #FFFFFF url('/images/back2.jpg') 50% 50% repeat fixed;
    }
    .product {
      margin-top: 100px;
      margin-bottom: -50px;
    }

    #shavings {
        background: #1daf0e url('/images/back3.jpg') 50% 50% repeat fixed;
        padding-top: 20px;
        color: white;
    }

    #stockists .header.jumbotron {
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .stockists-list.invisible {
      display: none;
    }

    #stockistsMap {
      height: 600px;
    }

    #stockistsMap .card {
      width: 18rem;
      border: 0;
    }

    #stockistsMap .card-body {
      margin: 0;
      padding: 0;
    }

    #stockistsList .card {
      border: 1px;
    }

    #about {
        background: #404040 url('/images/back4.jpg') 50% 0 repeat fixed;
        padding-top: 40px;
    }

    #contact {
        background-color: #404040;
    }

    #contact h1 {
        color: white;
    }

    #footer {
        background: #404040 url('/images/footer.jpg') top center;
        height: 37px;
        border-bottom: 4px solid white;
    }

    .jumbotron {
        background: none;
    }

    #about .jumbotron {
        color: white;
        background: rgb(0, 0, 0) transparent;
        background: rgba(0, 0, 0, 0.8);
    }

    .nav-link {
      position: relative;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      margin: -35px 0 0 -35px;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      opacity: 0;
      pointer-events: none;
    }

    .nav-link::after {
      border: 2px solid rgba(111,148,182,0.5);
    }

    .nav-link.click::after {
      -webkit-animation: anim-effect-jelena 0.3s ease-out forwards;
      animation: anim-effect-jelena 0.3s ease-out forwards;
    }

    @-webkit-keyframes anim-effect-jelena {
      0% {
        opacity: 1;
        -webkit-transform: scale3d(0.5, 0.5, 1);
        transform: scale3d(0.5, 0.5, 1);
      }
      to {
        opacity: 0;
        -webkit-transform: scale3d(1.2, 1.2, 1);
        transform: scale3d(1.2, 1.2, 1);
      }
    }

    @keyframes anim-effect-jelena {
      0% {
        opacity: 1;
        -webkit-transform: scale3d(0.5, 0.5, 1);
        transform: scale3d(0.5, 0.5, 1);
      }
      to {
        opacity: 0;
        -webkit-transform: scale3d(1.2, 1.2, 1);
        transform: scale3d(1.2, 1.2, 1);
      }
    }

    </style>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-45858679-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-45858679-1');
    </script>

</head>
<body>
  <div id="navigation" class="card">
      <div class="nav flex-column nav-pills" aria-orientation="vertical">
          <a href="tel:+613 5232 2200" class="btn btn-primary nav-link"><i class="fa fa-phone fa-2x" title="Call"></i></a>
          <a class="nav-link" href="#intro"><i class="fa fa-home fa-2x" title="Home"></i></a>
          <a class="nav-link" href="#products"><i class="fa fa-tag fa-2x" title="Products"></i></a>
          <a class="nav-link" href="#about"><i class="fa fa-info-circle fa-2x" title="About Us"></i></a>
          <a class="nav-link" href="#contact"><i class="fa fa-envelope fa-2x" title="Contact"></i></a>
          <a class="nav-link" href="#map"><i class="fa fa-map-marker fa-2x" title="Location"></i></a>

      </div>
  </div>

  <section id="intro">
      <div class="container">
        <div class="row justify-content-md-center">
            <div class="col-md-auto">
              <img width="404" height="114" src="/images/logo.png" alt="Breeder's Choice Packaged Woodshavings" class="img-fluid mx-auto d-block rounded logo" />
            </div>
        </div>
      </div>

  </section>

  <section id="products">

      <div class="container">
          <div class="row justify-content-md-center">
            <div class="col-md-auto">
                <img width="680" height="453" src="/images/products.jpg" alt="Breeder's Choice Packaged Woodshavings" class="img-fluid mx-auto d-block rounded product" />
            </div>
          </div>
      </div>

  </section>

  <section id="shavings">

      <div class="container">
        <div class="row">
          <div class="col">
                <div class="jumbotron lead">
        <p>Breeder&#8217;s Choice Woodshavings produce a clean and hygienic kiln-dried pine bedding which is marketed under the brand name of <strong>Breeder&#8217;s Choice</strong>.</p>
        <p>Breeder&#8217;s Choice pine woodshavings are for use as a bedding litter for all types of animals. Our shavings come from only kiln-dried pine and hence have a very high absorbency rate.</p>
        <p>Our woodshavings are a high-grade product, which has been specially screened to remove harmful dusts and reduce the incidence of reactive airway disease in animals.</p>
        <p>Baled woodshavings are particularly suitable for use in stables, poultry nests and sheds, calf sheds, and other types of animal enclosures.</p>
        <p>Our standard poly bale is 0.07 cubic metres (compressed) and provides approximately 0.2 cubic metres of uncompressed volume. We also offer a larger &#8220;wool pack&#8221; type bale, which provides approximately 1.2 cubic metres of uncompressed volume.</p>

                </div>
          </div>
        </div>
      </div>

  </section>

    <section id="stockists">
    <div class="form container">
      <div class="row">
        <div class="col">
          <div class="header jumbotron lead">
            <h1>Stockists</h1>

            <h4>Enter your location or suburb to find your closest Superior Shavings stockist. <a href="mailto:{{ 'jarrod@breederschoice.com.au' | encode_email }}" class="btn btn-primary"> Become a Stockist</a></h4>

            <div class="row">
              <div class="col col-12 col-md-5">
                <div class="input-group mb-2">
                  <input type="search" class="form-control" id="location" placeholder="Enter your location">
                  <div class="input-group-append">
                    <div class="input-group-text"><i class="fas fa-crosshairs"></i></div>
                  </div>
                </div>
              </div>
              <div class="col col-12 col-md-5">
                <select id="search-radius" class="form-control" id="radius">
                  <option value="10000">Within 10 km</option>
                  <option value="25000">Within 25 km</option>
                  <option value="50000">Within 50 km</option>
                  <option value="100000">Within 100 km</option>
                  <option value="250000">Within 250 km</option>
                </select>
              </div>
              <div class="col col-12 col-md-2 my-2 my-md-0 toggle-map-or-list invisible">
                <div class="btn-group btn-group-toggle stockists-view" data-toggle="buttons">
                  <label class="btn btn-secondary active">
                    <input type="radio" name="options" autocomplete="off" id="map" checked> <i class="fas fa-map-marker"></i>
                  </label>
                  <label class="btn btn-secondary">
                    <input type="radio" name="options" autocomplete="off" id="list"> <i class="fas fa-list"></i>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="stockistsList" class="stockists-list invisible">
      <div class="container">
        <div class="row">
          <div class="col">
            <div class="jumbotron">
              <div class="no-results">There are currently no results. Try searching by location or increasing your search radius.</div>
              <div class="container">
                <div class="row results"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="about" data-speed="6" data-type="background">
      <div class="container">
        <div class="row">
          <div class="col">
           <div class="jumbotron lead">
       <h1>About Us</h1>
       <p>Breeders Choice Woodshavings is a family owned business that commenced operation in 1994. Located in Colac in the western district of Victoria, on the edge of the Otways, which is one of the largest pine plantations in Australia.</p>
   <p>The sole business activity of Breeder&#8217;s Choice is the packaging and sale of kiln-dried pine woodshavings. All shavings go through a screening process to remove the smaller flakes and sawdust, thus providing very good absorbency</p>
   <p>As our main customers are in the poultry, equine and cattle industries, it is imperative that our shavings are clean, hygienic and come from only kiln dried radiata pine, with a moisture content of between 8% and 12%.</p>
   <p>We have supplied our packaged shavings into every state of Australia. Please contact us to locate a stockist in your area.</p>
           </div>
          </div>
        </div>
      </div>

  </section>

  <section id="contact">
    <div class="container">
      <div class="row">
        <div class="col">
          <div class="jumbotron">
            <h1>Contact</h1>

            <div class="row">
              <div class="col-lg">

            <div class="card">
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><a href="mailto:{{ 'jarrod@breederschoice.com.au' | encode_email }}"><i class="fa fa-at fa-lg" title="Email"></i> Email</a></li>
                <li class="list-group-item"><a href="tel:+613 5232 2200"><i class="fa fa-phone fa-lg" title="Call"></i> +613 5232 2200</a></li>
                <li class="list-group-item"><i class="fa fa-fax fa-lg" title="Fax"></i>  +613 5232 2270</li>
              </ul>
            </div>

              </div><div class="col-lg">

            <div class="card">
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fa fa-envelope fa-lg" title="Mail"></i>  Jarrod Hay, PO Box 530, Colac, VIC 3250 Australia</li>
                <li class="list-group-item"><i class="fa fa-map-marker-alt fa-lg" title="Location"></i>  92-98 Forest St, Colac, VIC 3250</li>
              </ul>
            </div>


              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="footer" class="text-right">
    <a target="_blank" href="http://www.zackdesign.biz" class="badge badge-light">Website by Zack Design</a>
  </section>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js" integrity="sha512-Y8iWYJDo6HiTo5xtml1g4QqHtl/PO1w+dmUpQfQSOTqKNsMhExfyPN2ncNAe9JuJUSKzwK/b6oaNPop4MXzkwg==" crossorigin="anonymous"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCdShg_qm-ntKG78Q945VKor9WnKoX-lH8&callback=initGoogleAPI&libraries=geometry,places&v=weekly"
        async
        defer
        type="text/javascript"
      ></script>
    <script type="text/javascript">

      let stockists = [];
      let map = {};
      let autocomplete = undefined;
      let place = undefined;
      let radius = 10000;
      let markers = [];
      let infoWindows = [];
      let stockistListContent = [];
      let searchArea = undefined;

      let updateStockistList = () => {};

      const searchMap = () => {
        if (!place || !place.geometry) {
          return;
        }

        resetMap();

        const searchArea = new google.maps.Circle({
          center: place.geometry.location,
          radius,
        });

        markers.forEach((marker, index) => {

          if (google.maps.geometry.spherical.computeDistanceBetween(
            marker.getPosition(), searchArea.getCenter()
          ) <= searchArea.getRadius()) {
            marker.setVisible(true);
            stockistListContent.push(infoWindows[index].getContent());
          }

        });

        map.fitBounds(searchArea.getBounds());
        updateStockistList();
      };

      jQuery(document).ready(function($) {

        const populateMap = () => {
          stockists.forEach((stockist) => {
            const stockistLatLong = { lat: parseFloat(stockist.Latitude), lng: parseFloat(stockist.Longitude) };
            const contentString = `
              <div class="col col-md-4">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">${stockist.Customer}</h5>
                    <p class="card-text">${stockist['Address 1']}<br />${stockist['Address 2']}</p>
                    <a href="tel:${stockist.Phone}" class="btn btn-primary"><i class="fas fa-phone"></i> ${stockist.Phone}</a>
                  </div>
                </div>
              </div>
            `;

            const infoWindow = new google.maps.InfoWindow({
              content: contentString,
            });

            const marker = new google.maps.Marker({
              position: stockistLatLong,
              map,
              title: stockist.Customer,
            });

            marker.addListener("click", () => {
              infoWindow.open(map, marker);
            });

            infoWindows.push(infoWindow);
            markers.push(marker);
          });
        };

        updateStockistList = () => {
          if (stockistListContent.length) {
            $('.no-results').hide();
            $(".toggle-map-or-list").removeClass('invisible');
          } else {
            $('.no-results').show();
          }
          $(`#stockistsList .results`).html(stockistListContent.join(""));
        };

        $.get("{{ site.stockistscsv }}", (data) => {
          stockists = $.csv.toObjects(data);
          if (document.getElementById("stockistsMap")) {
            populateMap();
          }
        });

        $("#search-radius").on('change', function() {
          radius = parseInt(this.value, 10);
          searchMap();
          updateStockistList();
        });

        $window = $(window);
        $('section[data-type="background"]').each(function(){
            var $bgobj = $(this);
            $(window).scroll(function() {
                var yPos = -($window.scrollTop() / $bgobj.data('speed'));
                var coords = '50% ' + yPos + 'px';
                $bgobj.css({ backgroundPosition: coords });
            });
        });

        $('.stockists-view input').click((event) => {
          const type = event.target.id;
          if (type === 'list') {
            $(`#stockistsList`).show().removeClass('invisible');
            $(`#stockistsMap`).hide().addClass('invisible');
            updateStockistList();
          } else {
            $(`#stockistsList`).hide().addClass('invisible');
            $(`#stockistsMap`).show().removeClass('invisible');
            searchMap();
          }
        });

        // https://tympanus.net/codrops/2015/02/11/subtle-click-feedback-effects/
        // Thank you!
        $(".nav-link").click(function() {
          $(this).addClass("click");
          window.navigator.vibrate(200);

          var remove = function(button) {
            $(button).removeClass("click");
          };

          setTimeout(remove, 300, this);
        });

        // Ensuring we don't load a map until we need to
        // because otherwise it costs money
        $window.scroll(() => {
          const top_of_element = $("#stockists").offset().top;
          const bottom_of_element = $("#stockists").offset().top + $("#stockists").outerHeight();
          const bottom_of_screen = $(window).scrollTop() + $(window).innerHeight();
          const top_of_screen = $(window).scrollTop();

          if ((bottom_of_screen > top_of_element) && (top_of_screen < bottom_of_element) && !$("#stockistsMap").length){
            $("<div id='stockistsMap'></div>").insertAfter("#stockists .form.container");

            if (typeof(google) !== undefined) {
              initGoogleAPI();
              populateMap();
            }
          }
        });

      });

      const resetMap = () => {
        markers.forEach((marker) => marker.setVisible(false));
        infoWindows.forEach((iw) => iw.close());
        stockistListContent = [];
      };

      function initGoogleAPI() {
        if (document.getElementById("stockistsMap")) {
          const myLatLng = { lat: -25.363, lng: 131.044 };
          map = new google.maps.Map(document.getElementById("stockistsMap"), {
            zoom: 4,
            center: myLatLng
          });

          const input = document.getElementById('location');
          autocomplete = new google.maps.places.Autocomplete(input);
          autocomplete.setComponentRestrictions({ 'country': ['au'] });

          autocomplete.addListener('place_changed', () => {
            place = autocomplete.getPlace();
            searchMap();
          });
        }
      }
    </script>
  </body>
</html>
